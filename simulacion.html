 <html>
   <head>
   <title>Esta es una pagina web</title>
   <script type="text/javascript">
		var NF1 , NF2, NP1 , NP2, T, NE, STL, STP, M, N ;
		var llegadaPedido = terminaImpresion = terminaFabricacion = terminaEmpacado1 = terminaEmpacado2 = new Object();
		var reposicionPlastico = reposicionLaca = reposicionPintura = reposicionCajas = new Object();		   
		var eventosFuturos = colaB1F = colaB2F = colaB1I = colaB2I = colaB1E = colaB2E = new Array();
		
		

		var maquinaFabricacion = new Object();
		maquinaFabricacion.modulo = 0;

		eventosFuturos.push(llegadaPedido,terminaImpresion,terminaFabricacion,terminaEmpacado1,terminaEmpacado2,
		reposicionPlastico,reposicionLaca,reposicionPintura,reposicionCajas);

		llegadaPedido.funcion = funcion;
		terminaImpresion.funcion = funcion;
		terminaFabricacion.funcion = funcion;
		terminaEmpacado1.funcion = funcion;
		terminaEmpacado2.funcion = funcion
		reposicionPlastico.funcion = funcion;
		reposicionLaca.funcion = funcion;
		reposicionPintura.funcion = funcion;
		reposicionCajas.funcion = funcion;

		eventosFuturos.forEach(function(elemento, indice){elemento.numero = 0;});


		function obtenerMinimo() {
		 
			minimo = eventosFuturos.sort()[0];
			return minimo.funcion();
		}

		function funcion (){
			return 2*2;
		}

		function iniciarSimulacion() {
			
			//srand(time(NULL));
			inicializar();
			simulacion();
		}

		function inicializar(){
		}

		function simulacion(){
			
			if()
			
		}

		function creacionDePedido(){
			pedido = new Object();
			pedido.tipoPomo = obtenerTipoPomo();
			pedido.tamanioPedido = obtenerTamanioPedido();

			return pedido;
		}

		function llegadaPedido(){

			T = llegadaPedido.tiempo;
			llegadaPedido.tiempo = T + getIntervaloPedido();
			unPedido = creacionDePedido();

			if(Math.random() < 0.91)
				llegaPedidoCompleto(unPedido);
			else
				llegaPedidoImpresion(unPedido);
				
		}

		function getIntervaloPedido(){
			return 1; //FDP
		}

		function ubicarEnColaDeFabricacion(unPedido){

			if(unPedido.tipoPomo == 'B1'){
				NF1++;
				colaB1F.push(unPedido);
			}else{
				NF2++;
				colaB2F.push(unPedido);
			}
		}

		function ubicarEnColaDeImpresion(unPedido){

			if(unPedido.tipoPomo == 'B1'){
				NP1++;
				colaB1I.push(unPedido);
			}
			else{
				NP2++;
				colaB2I.push(unPedido);
			}
		}

		function ubicarEnColaDeEmpaque(unPedido){

			if(unPedido.tipoPomo == 'B1'){
				NE1++;
				colaB1E.push(unPedido);
			}
			else{
				NE2++;
				colaB2E.push(unPedido);
			}
		}

		function llegaPedidoCompleto(unPedido){
						
			ubicarEnColaDeFabricacion(unPedido);
			if(NF1 + NF2 == 1){ //&& unPedido.tipoPomo == maquinaFabricacion.configuracionPomo no es necesario porque si esta  vacio cambiamos de tipo la maquina
				var elementoAFabricar = obtenerDemoraPreparadoMaquinaFabricacion();

				terminaFabricacion.tiempo = T + elementoAFabricar.demoraPreparacion + obtenerDemoraDeFabricacion(unPedido);
			}
			else{} //calculo de resultados

		}

		function terminaFabricacion(){
			T = terminaFabricacion.tiempo;

			if(NF1 > 0 || NF2 > 0){
				var elementoAFabricar = obtenerDemoraPreparadoMaquinaFabricacion();
				terminaFabricacion.tiempo = T + elementoAFabricar.demoraPreparacion + obtenerDemoraDeFabricacion(unPedido);
			}
				
			if(NP1 + NP2 = 1)
				terminaImpresion.tiempo = T + obtenerDemoraDeImpresion();
			
			if(STPL <= SRPL && reposicionPlastico.tiempo == 99999)
				reposicionPlastico.tiempo = T + obtenerDemoraDeRecepcionDePlastico();
			
		}


		function llegaPedidoImpresion(unPedido){
			
			ubicarEnColaDeImpresion();
			if( NP1 + NP2 == 1){
				terminaImpresion.tiempo = T + obtenerDemoraDeImpresion(unPedido);
			}
			else {}//calculo de resultados
			
		}

		function terminaImpresion(){
			T = terminaImpresion.tiempo;
			if(NP1 > 0 || NP2 > 0){
				terminaImpresion.tiempo = T  + obtenerDemoraDeImpresion();
			}
			else {}//no hay m√°s pintado ver que se hace

			if(NE < 2)
				if(terminaEmpacado1 == 99999)
					terminaEmpacado1.tiempo = T + obtenerDemoraDeEmbalado();
				else
					terminaEmpacado2.tiempo = T + obtenerDemoraDeEmbalado();
			
			if(STL <= 20 && reposicionLaca.tiempo == 99999)
				reposicionLaca.tiempo = T + 24*60; 
			
			if(STP <= 5 && reposicionPintura.tiempo == 99999)
				reposicionPintura.tiempo = T + 24*60;
		}

		

		function terminaEmpacado(terminaEmpacado){
			T = terminaEmpacado.tiempo;
			if(NE > 1)
				terminaEmpacado.tiempo = T + obtenerDemoraDeEmbalado();
				
			if(STC <= SRC && reposicionCajas.tiempo == 99999)
				reposicionCajas.tiempo = T + 24*60;				
			
		}

		function reposicionDePlastico(){
			STPL = STPL + TPP;
		}

		function reposicionDeLaca(){
			STL = STL + 20;
		}

		function reposicionDePintura(){
			STP = STP + 5;
		}

		funcion reposicionDeCajas(){
			STC = STC + TPC;
		}
		function obtenerTipoPomo(){


		}

		function obtenerTamanioPedido(){


		}
		function obtenerDemoraDeEmbalado(){
			//Las tiempos de empaque responden a una fdp en minutos por cada caja a empacar.
		};

		function obtenerDemoraDeFabricacion(){
	e


			//en base a la cantidad de los mismos y su tamanio, tambien hay que tener en cuenta en que formato estaba la maquina configurada.
		};
		function obtenerDemoraDeImpresion(unPedido){
			//el tiempo de pintado mas el secado mas la aplicacion de la laca, 
			//esta dado por una fdp en horas por cada 1000 unidades de pomos, 
			//que es el tamanioo maximo de cada lote de pomos a pintar al mismo tiempo. 
			//tener en cuenta tambien de que tipo es la maquina de impresion y que tipo de pomo se va a imprimir
		};

		function consumoDePlastico(/*tipoPomo, cantidadPomos*/){
			//Estos tamanios determinan la cantidad de gramos de plastico que consume cada pomo.
		};

		function consumoDePintura(/*cantidadPomos*/){
			//El consumo de pintura esta dado por una fdp en gramos para cada lote de 1000
		}

		function consumoDeLaca(/*tipoPomo, cantidadPomos*/){
			//El consumo de laca esta determinado de acuerdo al tamanio del pomo (es un valor fijo por cada lote)
		}

		function obtenerDemoraPreparadoMaquinaFabricacion(){
			//comparar con el estado de la maquina. Es lo mismo para fabricacion que para impresion.
			var estadoMaquina = obtenerEstadoMaquina();
			var elementoAFabricar;

			if(estadoMaquina.tipoPomo == 'B1')
				elementoAFabricar = NF1 > 0 ? obtenerDemoraMismaMaquina(colaB1F) : obtenerDemoraCambioMaquina(estadoMaquina,colaB2F);

			
			else
				elementoAFabricar = NF2 > 0 ? obtenerDemoraMismaMaquina(colaB2F) : obtenerDemoraCambioMaquina(estadoMaquina,colaB1F);

			return elementoAFabricar;

			/*
			if(estadoMaquina.tipoPomo == tipoPomoAProducir){
				maquinaFabricacion.modulo++;
				return 2;
			}
			else{
				maquinaFabricacion.modulo = estadoMaquina.modulo;
				return 4;
			}*/
		}

		function obtenerDemoraMismaMaquina(cola){
			var elementoAFabricar = new Object();
			elementoAFabricar.elemento = cola.shift(); 
			elementoAFabricar.demoraPreparacion = 2;
			maquinaFabricacion.modulo++;
			return elementoAFabricar;
		}

		function obtenerDemoraDistintaMaquina(estadoMaquina,cola){
			var elementoAFabricar = new Object();
			elementoAFabricar.elemento = cola.shift(); 
			elementoAFabricar.demoraPreparacion = 4;
			maquinaFabricacion.modulo = estadoMaquina.modulo;
			return elementoAFabricar;

		}

		function obtenerEstadoMaquina(){
			var estadoMaquina = new Object();
			if(maquinaFabricacion.modulo % (M + N) < M ){
				estadoMaquina.tipoPomo = 'B1';
				estadoMaquina.modulo = M;
			}
			else{
				estadoMaquina.tipoPomo = 'B2';
				estadoMaquina.modulo = N;
			}

			return estadoMaquina;

		}


   </script>
   </head>
   <body>
   <script>
           document.write(iniciarSimulacion());
   </script>
   </body>
   </html>
